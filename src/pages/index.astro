---
import { icons } from "@iconify-json/logos";
import { buildBadge } from "../buildShield";

const icon_keys = Object.keys(icons.icons);
const pure_filter_keys = /(.*)-icon$/;
const duplicate_keys: string[] = [];

icon_keys.forEach((key) => {
  const matches = key.match(pure_filter_keys);
  if (matches) duplicate_keys.push(matches[1]);
});

const filtered_icon_keys = icon_keys.filter((key) => {
  return !duplicate_keys.includes(key);
});

const badge_list = await buildBadge(filtered_icon_keys);
---

<section class="mx-auto max-w-7xl py-8 min-h-screen">
  <header>
    <h1
      class="text-5xl font-extrabold tracking-tight text-gray-900 sm:text-4xl lg:text-6xl"
    >
      <span
        class="bg-clip-text text-transparent bg-gradient-to-r from-pink-500 to-violet-500"
      >
        Skill Badges
      </span>
    </h1>
    <p class="mt-6 text-xl leading-8 text-gray-600">
      There are over 2000 skill badges available for use in your profile.
    </p>
    <p>
      Powered by <a
        class="ds-link"
        href="//shields.io"
        target="_blank"
        rel="noopener noreferrer"
      >
        shields.io
      </a> and <a
        class="ds-link"
        href="//github.com/gilbarbara/logos"
        target="_blank"
        rel="noopener noreferrer"
      >
        gilbarbara's logos
      </a>.
    </p>
  </header>
  <div class="ds-divider"></div>
  <div class="flex flex-col gap-4">
    <div class="ds-collapse bg-base-200">
      <input
        type="radio"
        class="pointer-events-none"
        name="my-accordion-2"
        checked="checked"
      />
      <div class="ds-collapse-title ds-alert ds-alert-info text-xl font-medium">
        <span>Step 1: Select you needed skill icon</span>
        <div class="ml-auto z-10">
          <input
            type="text"
            class="ds-input ds-input-sm"
            placeholder="Filter support regexp"
          />
          <button class="ds-btn ds-btn-sm">Back here</button>
          <button class="ds-btn ds-btn-sm ds-btn-primary">Next</button>
        </div>
      </div>
      <div class="ds-collapse-content p-4 overflow-y-auto">
        <div class="h-64 flex max-w-full flex-wrap gap-2">
          {
            badge_list.map((badge) => (
              <span id={badge.name}>
                <Fragment set:html={badge.svg} />
              </span>
            ))
          }
        </div>
      </div>
    </div>
    <div class="ds-collapse bg-base-200">
      <input type="radio" class="pointer-events-none" name="my-accordion-2" />
      <div class="ds-collapse-title text-xl font-medium">
        Click to open this one and close others
        <div class="ml-auto z-10">
          <button class="ds-btn ds-btn-sm">Back here</button>
          <button class="ds-btn ds-btn-sm ds-btn-primary">Next</button>
        </div>
      </div>
      <div class="ds-collapse-content">
        <p>hello</p>
      </div>
    </div>
    <div class="ds-collapse bg-base-200">
      <input type="radio" class="pointer-events-none" name="my-accordion-2" />
      <div class="ds-collapse-title text-xl font-medium">
        Click to open this one and close others
      </div>
      <div class="ds-collapse-content">
        <p>hello</p>
      </div>
    </div>
  </div>
</section>
